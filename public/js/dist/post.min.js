const newComment=document.querySelector("#new-comment"),commentForm=document.querySelector("#comment-form"),commentFormContainer=document.querySelector("#comment-form-container"),checkSignedIn=async()=>{const a=await fetch("/api/users/signed-in",{method:"POST",headers:{"Content-Type":"application/json"}});a.ok?(commentFormContainer.classList.remove("hide"),newComment.classList.add("hide")):document.location.replace("/login")};newComment.addEventListener("click",checkSignedIn);const submitComment=async a=>{a.preventDefault();const b=document.querySelector(".post").dataset.post_id,c=document.querySelector("#textarea").value.trim();c||alert("Enter comment text");const d=await fetch("/api/comments/new",{method:"POST",body:JSON.stringify({text:c,comment_date:new Date,post_id:b}),headers:{"Content-Type":"application/json"}});d.ok&&document.location.replace(`/post/${b}`)};commentForm.addEventListener("submit",submitComment);