const postForm=document.querySelector("#post-form"),newPostBtn=document.querySelector("#publish"),updatePostBtn=document.querySelector("#update"),deletePostBtn=document.querySelector("#delete"),publishPost=async()=>{const a=document.querySelector("#titlearea").value.trim(),b=document.querySelector("#textarea").value.trim(),c=await fetch("/api/posts",{method:"POST",body:JSON.stringify({title:a,text:b,post_date:new Date}),headers:{"Content-Type":"application/json"}});c.ok?document.location.replace("/dashboard"):alert("Server error: Please try again")},updatePost=async()=>{const a=document.querySelector("#post-form").dataset.post_id,b=document.querySelector("#titlearea").value.trim(),c=document.querySelector("#textarea").value.trim();if(!b)return void alert("Enter title for post");if(!c)return void alert("Enter text for post");const d=await fetch(`/api/posts/${a}`,{method:"PUT",body:JSON.stringify({title:b,text:c}),headers:{"Content-Type":"application/json"}});d.ok?document.location.replace("/dashboard"):alert("Server error: Please try again")},deletePost=async()=>{const a=document.querySelector("#post-form").dataset.post_id,b=await fetch(`/api/posts/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});b.ok?document.location.replace("/dashboard"):alert("Server error: Please try again")};newPostBtn&&newPostBtn.addEventListener("click",publishPost),updatePostBtn&&(updatePostBtn.addEventListener("click",updatePost),deletePostBtn.addEventListener("click",deletePost));